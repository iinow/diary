import"./_rollup-plugin-inject-process-env.95689655.js";import{S as e,i as t,s,c as a,j as n,n as i,o as l,p as r,r as o,e as c,t as u,f as d,g as p,h as f,d as h,k as m,E as g,l as v,m as b,$,a as y,b as x,v as w,x as C,O as k,a5 as E,y as R,z as j,A as V,P as A,B as S,K as z,D as I,a6 as P,F as D,H as M,a0 as L,a7 as T,q as U,a1 as q,a8 as F,a9 as H}from"./client.5ddc8950.js";import{o as O,I as B,g as K}from"./index.1b5c6dba.js";import{s as N,e as X}from"./ApolloClientStore.11a25358.js";import{i as _,O as G,b as J,f as Q,t as W,m as Y,o as Z}from"./tap.0aca45ef.js";function ee(e,t){var s;return void 0===e&&(e=0),void 0===t&&(t=J),(_(s=e)||!(s-parseFloat(s)+1>=0)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=J),new G((function(s){return s.add(t.schedule(te,e,{subscriber:s,counter:0,period:e})),s}))}function te(e){var t=e.subscriber,s=e.counter,a=e.period;t.next(s),this.schedule({subscriber:t,counter:s+1,period:a},a)}function se(e){let t,s,a,n,i,l=[e[17],{value:e[0]},{class:s="textarea "+e[11]+"\n      "+e[2]},{disabled:e[10]}],r={};for(let e=0;e<l.length;e+=1)r=j(r,l[e]);return{c(){t=c("textarea"),this.h()},l(e){t=d(e,"TEXTAREA",{value:!0,class:!0,disabled:!0}),p(t).forEach(h),this.h()},h(){I(t,r),g(t,"svelte-1v5s752",!0)},m(s,l){v(s,t,l),e[31](t),n||(i=[P(a=e[25].call(null,t)),D(t,"input",e[22]),D(t,"focus",e[23]),D(t,"blur",e[24]),D(t,"change",e[29])],n=!0)},p(e,a){I(t,r=M(l,[131072&a[0]&&e[17],1&a[0]&&{value:e[0]},2052&a[0]&&s!==(s="textarea "+e[11]+"\n      "+e[2])&&{class:s},1024&a[0]&&{disabled:e[10]}])),g(t,"svelte-1v5s752",!0)},d(s){s&&h(t),e[31](null),n=!1,L(i)}}}function ae(e){let t,s,a,n,i,l=[e[17],{type:e[14]},{value:e[0]},{class:s="input "+e[11]+" "+e[2]+" "+(e[26].class||"")},{disabled:e[10]}],r={};for(let e=0;e<l.length;e+=1)r=j(r,l[e]);return{c(){t=c("input"),this.h()},l(e){t=d(e,"INPUT",{type:!0,value:!0,class:!0,disabled:!0}),this.h()},h(){I(t,r),g(t,"svelte-1v5s752",!0)},m(s,l){v(s,t,l),t.value=r.value,e[30](t),n||(i=[P(a=e[25].call(null,t)),D(t,"input",e[22]),D(t,"focus",e[23]),D(t,"blur",e[24]),D(t,"change",e[28])],n=!0)},p(e,a){I(t,r=M(l,[131072&a[0]&&e[17],16384&a[0]&&{type:e[14]},1&a[0]&&t.value!==e[0]&&{value:e[0]},67110916&a[0]&&s!==(s="input "+e[11]+" "+e[2]+" "+(e[26].class||""))&&{class:s},1024&a[0]&&{disabled:e[10]}])),"value"in r&&(t.value=r.value),g(t,"svelte-1v5s752",!0)},d(s){s&&h(t),e[30](null),n=!1,L(i)}}}function ne(e){let t,s;return t=new B({props:{pack:e[9],isLeft:!0,icon:e[8]}}),{c(){a(t.$$.fragment)},l(e){n(t.$$.fragment,e)},m(e,a){i(t,e,a),s=!0},p(e,s){const a={};512&s[0]&&(a.pack=e[9]),256&s[0]&&(a.icon=e[8]),t.$set(a)},i(e){s||(l(t.$$.fragment,e),s=!0)},o(e){r(t.$$.fragment,e),s=!1},d(e){o(t,e)}}}function ie(e){let t,s;return t=new B({props:{pack:"fas",isRight:!0,isClickable:e[4],icon:e[4]?e[20]:e[15],type:e[4]?"is-primary":e[11]}}),t.$on("click",e[21]),{c(){a(t.$$.fragment)},l(e){n(t.$$.fragment,e)},m(e,a){i(t,e,a),s=!0},p(e,s){const a={};16&s[0]&&(a.isClickable=e[4]),1081360&s[0]&&(a.icon=e[4]?e[20]:e[15]),2064&s[0]&&(a.type=e[4]?"is-primary":e[11]),t.$set(a)},i(e){s||(l(t.$$.fragment,e),s=!0)},o(e){r(t.$$.fragment,e),s=!1},d(e){o(t,e)}}}function le(e){let t,s,a,n;return{c(){t=c("small"),s=u(e[16]),a=u(" / "),n=u(e[5]),this.h()},l(i){t=d(i,"SMALL",{class:!0});var l=p(t);s=f(l,e[16]),a=f(l," / "),n=f(l,e[5]),l.forEach(h),this.h()},h(){m(t,"class","help counter svelte-1v5s752"),g(t,"is-invisible",!e[13])},m(e,i){v(e,t,i),b(t,s),b(t,a),b(t,n)},p(e,a){65536&a[0]&&$(s,e[16]),32&a[0]&&$(n,e[5]),8192&a[0]&&g(t,"is-invisible",!e[13])},d(e){e&&h(t)}}}function re(e){let t,s,a,n,i;function o(e,t){return"textarea"!==e[1]?ae:se}let u=o(e),f=u(e),$=e[8]&&ne(e),k=!e[7]&&(e[4]||e[11])&&ie(e),E=e[5]&&e[6]&&"number"!==e[1]&&le(e);return{c(){t=c("div"),f.c(),s=y(),$&&$.c(),a=y(),k&&k.c(),n=y(),E&&E.c(),this.h()},l(e){t=d(e,"DIV",{class:!0});var i=p(t);f.l(i),s=x(i),$&&$.l(i),a=x(i),k&&k.l(i),n=x(i),E&&E.l(i),i.forEach(h),this.h()},h(){m(t,"class","control svelte-1v5s752"),g(t,"has-icons-left",e[18]),g(t,"has-icons-right",e[19]),g(t,"is-loading",e[7]),g(t,"is-expanded",e[3])},m(e,l){v(e,t,l),f.m(t,null),b(t,s),$&&$.m(t,null),b(t,a),k&&k.m(t,null),b(t,n),E&&E.m(t,null),i=!0},p(e,i){u===(u=o(e))&&f?f.p(e,i):(f.d(1),f=u(e),f&&(f.c(),f.m(t,s))),e[8]?$?($.p(e,i),256&i[0]&&l($,1)):($=ne(e),$.c(),l($,1),$.m(t,a)):$&&(w(),r($,1,1,(()=>{$=null})),C()),e[7]||!e[4]&&!e[11]?k&&(w(),r(k,1,1,(()=>{k=null})),C()):k?(k.p(e,i),2192&i[0]&&l(k,1)):(k=ie(e),k.c(),l(k,1),k.m(t,n)),e[5]&&e[6]&&"number"!==e[1]?E?E.p(e,i):(E=le(e),E.c(),E.m(t,null)):E&&(E.d(1),E=null),262144&i[0]&&g(t,"has-icons-left",e[18]),524288&i[0]&&g(t,"has-icons-right",e[19]),128&i[0]&&g(t,"is-loading",e[7]),8&i[0]&&g(t,"is-expanded",e[3])},i(e){i||(l($),l(k),i=!0)},o(e){r($),r(k),i=!1},d(e){e&&h(t),f.d(),$&&$.d(),k&&k.d(),E&&E.d()}}}function oe(e,t,s){let a,n,{value:i=""}=t,{type:l="text"}=t,{size:r=""}=t,{expanded:o=!1}=t,{passwordReveal:c=!1}=t,{maxlength:u=null}=t,{hasCounter:d=!0}=t,{loading:p=!1}=t,{icon:f=""}=t,{iconPack:h=""}=t,{disabled:m=!1}=t,g=!1,v="text",b="",$="",y=null;const x=k(),w=E("type");w&&(b=w()||""),R((()=>{s(14,v=l)}));const C=K(T);let I,P,D,M;return e.$$set=e=>{s(26,t=j(j({},t),V(e))),"value"in e&&s(0,i=e.value),"type"in e&&s(1,l=e.type),"size"in e&&s(2,r=e.size),"expanded"in e&&s(3,o=e.expanded),"passwordReveal"in e&&s(4,c=e.passwordReveal),"maxlength"in e&&s(5,u=e.maxlength),"hasCounter"in e&&s(6,d=e.hasCounter),"loading"in e&&s(7,p=e.loading),"icon"in e&&s(8,f=e.icon),"iconPack"in e&&s(9,h=e.iconPack),"disabled"in e&&s(10,m=e.disabled)},e.$$.update=()=>{if(s(17,I={...O(t,"class","value","type","size","passwordReveal","hasCounter","loading","disabled")}),256&e.$$.dirty[0]&&s(18,P=!!f),2192&e.$$.dirty[0]&&s(19,D=c||p||b),134217728&e.$$.dirty[0]&&s(20,M=g?"eye-slash":"eye"),2048&e.$$.dirty[0])switch(b){case"is-success":s(15,$="check");break;case"is-danger":s(15,$="exclamation-circle");break;case"is-info":s(15,$="info-circle");break;case"is-warning":s(15,$="exclamation-triangle")}1&e.$$.dirty[0]&&s(16,y="string"==typeof i?i.length:"number"==typeof i?i.toString().length:0)},t=V(t),[i,l,r,o,c,u,d,p,f,h,m,b,a,n,v,$,y,I,P,D,M,async function(){s(27,g=!g),s(14,v=g?"text":"password"),await A(),a.focus()},e=>{s(0,i=e.target.value),s(26,t.value=i,t),x("input",e)},()=>s(13,n=!0),()=>s(13,n=!1),C,t,g,function(t){S(e,t)},function(t){S(e,t)},function(e){z[e?"unshift":"push"]((()=>{a=e,s(12,a)}))},function(e){z[e?"unshift":"push"]((()=>{a=e,s(12,a)}))}]}class ce extends e{constructor(e){super(),t(this,e,oe,re,s,{value:0,type:1,size:2,expanded:3,passwordReveal:4,maxlength:5,hasCounter:6,loading:7,icon:8,iconPack:9,disabled:10},[-1,-1])}}var ue,de=new Uint8Array(16);function pe(){if(!ue&&!(ue="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ue(de)}var fe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function he(e){return"string"==typeof e&&fe.test(e)}for(var me=[],ge=0;ge<256;++ge)me.push((ge+256).toString(16).substr(1));function ve(e,t,s){var a=(e=e||{}).random||(e.rng||pe)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){s=s||0;for(var n=0;n<16;++n)t[s+n]=a[n];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=(me[e[t+0]]+me[e[t+1]]+me[e[t+2]]+me[e[t+3]]+"-"+me[e[t+4]]+me[e[t+5]]+"-"+me[e[t+6]]+me[e[t+7]]+"-"+me[e[t+8]]+me[e[t+9]]+"-"+me[e[t+10]]+me[e[t+11]]+me[e[t+12]]+me[e[t+13]]+me[e[t+14]]+me[e[t+15]]).toLowerCase();if(!he(s))throw TypeError("Stringified UUID is invalid");return s}(a)}function be(e,t,s){const a=e.slice();return a[9]=t[s],a}function $e(e){let t,s,a,n=e[9]+"";return{c(){t=c("div"),s=u(n),a=y()},l(e){t=d(e,"DIV",{});var i=p(t);s=f(i,n),a=x(i),i.forEach(h)},m(e,n){v(e,t,n),b(t,s),b(t,a)},p(e,t){2&t&&n!==(n=e[9]+"")&&$(s,n)},d(e){e&&h(t)}}}function ye(e){let t,s,m,g,$,w,C,k,E,R=e[1],j=[];for(let t=0;t<R.length;t+=1)j[t]=$e(be(e,R,t));function V(t){e[2].call(null,t)}let A={};return void 0!==e[0]&&(A.value=e[0]),C=new ce({props:A}),z.push((()=>F(C,"value",V))),{c(){t=y(),s=c("h1"),m=u("Chat"),g=y(),$=c("div");for(let e=0;e<j.length;e+=1)j[e].c();w=y(),a(C.$$.fragment),this.h()},l(e){U('[data-svelte="svelte-1r6ueia"]',document.head).forEach(h),t=x(e),s=d(e,"H1",{});var a=p(s);m=f(a,"Chat"),a.forEach(h),g=x(e),$=d(e,"DIV",{});var i=p($);for(let e=0;e<j.length;e+=1)j[e].l(i);i.forEach(h),w=x(e),n(C.$$.fragment,e),this.h()},h(){document.title="Chat"},m(e,a){v(e,t,a),v(e,s,a),b(s,m),v(e,g,a),v(e,$,a);for(let e=0;e<j.length;e+=1)j[e].m($,null);v(e,w,a),i(C,e,a),E=!0},p(e,[t]){if(2&t){let s;for(R=e[1],s=0;s<R.length;s+=1){const a=be(e,R,s);j[s]?j[s].p(a,t):(j[s]=$e(a),j[s].c(),j[s].m($,null))}for(;s<j.length;s+=1)j[s].d(1);j.length=R.length}const s={};!k&&1&t&&(k=!0,s.value=e[0],H((()=>k=!1))),C.$set(s)},i(e){E||(l(C.$$.fragment,e),E=!0)},o(e){r(C.$$.fragment,e),E=!1},d(e){e&&h(t),e&&h(s),e&&h(g),e&&h($),q(j,e),e&&h(w),o(C,e)}}}function xe(e,t,s){let a="",n="",i=[];const l=ve(),r=(e,t)=>N`
      mutation {
        publishMessage(topic: "${e}", message: "${t}")
      }
    `,o=e=>N`
      subscription {
        subscriptionMessage(topic: "${e}") {
          text
          createdAt
        }
      }
    `;return R((()=>{ee(1e3).pipe(Q((()=>n!==a)),W((()=>n=a)),Y((()=>X.get())),Z.flatMap((e=>e.mutate({mutation:r(l,n)})))).subscribe((()=>{console.log(l)})),X.get().subscribe({query:o(l)}).subscribe((e=>{const t=e.data.subscriptionMessage;i.push(t.text),s(1,i=[...i])}))})),[a,i,function(e){a=e,s(0,a)}]}export default class extends e{constructor(e){super(),t(this,e,xe,ye,s,{})}}
